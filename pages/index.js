import Head from 'next/head';
import Image from 'next/image';
import styles from '../styles/Home.module.css';
import Link from 'next/link';
import Navbar from '../Components/Navbar';
import { useEffect, useState, useCallback } from 'react';
import { SlMenu } from 'react-icons/sl';
import { BsArrowDownShort } from 'react-icons/bs';
import { Fade, Zoom } from 'react-awesome-reveal';
import Slice from '../Components/Slice';
import Footer from '../Components/Footer';
import BioSkills from '../Components/BioSkills';

const useMediaQuery = (width) => {
  const [targetReached, setTargetReached] = useState(false);

  const updateTarget = useCallback((e) => {
    if (e.matches) {
      setTargetReached(true);
    } else {
      setTargetReached(false);
    }
  }, []);

  useEffect(() => {
    const media = window.matchMedia(`(max-width: ${width}px)`);
    media.addListener(updateTarget);

    // Check on mount (callback is not called until a change occurs)
    if (media.matches) {
      setTargetReached(true);
    }

    return () => media.removeListener(updateTarget);
  }, [width, updateTarget]);

  return targetReached;
};

export default function Home() {
  const isBreakpoint = useMediaQuery(1023);
  return (
    <div>
      <Head>
        <title>Scott Irwin - Fullstack Developer</title>
        <meta name='description' content='Generated by create next app' />
        <meta name='viewport' content='width=device-width, initial-scale=1' />
        <link rel='icon' href='/favicon.ico' />
      </Head>
      <main className='h-screen'>
        <>
          {isBreakpoint ? (
            <nav className='flex justify-between items-center laptop:px-6 iphone:p-2 laptop:mt-6 iphone:mt-2'>
              <p
                id='glow'
                className='text-blue-500 rounded-[100%] laptop:text-3xl p-2 iphone:text-2xl iphone:text-center bg-slate-100 shadow-md'
              >
                S.I.
              </p>
              <div className='mr-10 fixed p-2 right-0 bg-slate-200 rounded-md'>
                <SlMenu />
              </div>
            </nav>
          ) : (
            <nav className='flex justify-between items-center laptop:px-6 iphone:p-2 laptop:mt-6 iphone:mt-2'>
              <p
                id='glow'
                className='text-blue-500 rounded-[100%] laptop:text-3xl p-5 iphone:text-xl iphone:text-center bg-slate-100 shadow-md'
              >
                S.I.
              </p>
              <div className='flex laptop:w-1/3 iphone:w-full items-center justify-between'>
                <Link
                  href='/'
                  className='px-3 hover:underline hover:scale-110 duration-500'
                >
                  Home
                </Link>
                <Link
                  href='/#projects'
                  className='px-3 hover:underline hover:scale-110 duration-500'
                >
                  Projects
                </Link>
                <Link
                  href='/about'
                  className='px-3 hover:underline hover:scale-110 duration-500'
                >
                  About
                </Link>
                <p className='px-3 hover:underline hover:scale-110 duration-500'>
                  Contact
                </p>
              </div>
            </nav>
          )}
        </>
        <div className='laptop:flex tablet:flex m-5 mx-10 iphone:h-auto laptop:h-auto'>
          <div className='h-full tablet:w-full iphone:w-full iphone:h-1/2 laptop:w-1/2'>
            <Fade direction='left' triggerOnce delay={200}>
              <div className='relative min-h-[500px] h-atuo laptop:w-full tablet:w-full iphone:w-full'>
                <Image
                  alt='Scott Irwin'
                  layout='fill'
                  objectFit='contain'
                  quality={100}
                  src='/headshot.png'
                />
              </div>
            </Fade>
          </div>
          <Fade
            triggerOnce
            direction='right'
            className='flex justify-center items-center laptop:w-3/4 mx-5'
          >
            <BioSkills />
          </Fade>
        </div>
        <div className='flex justify-center'>
          <hr className='mt-20 w-1/4 text-center' />
          <h1 className='text-center text-gray-500 mt-16 mx-5 text-2xl flex flex-shrink'>
            P r o j e c t s
          </h1>
          <a id='projects'></a>
          <hr className='mt-20 w-1/4 text-center flex flex-shrink' />
        </div>
        <div className='flex justify-center'>
          <BsArrowDownShort
            size={30}
            color={'gray'}
            className='mt-10 animate-bounce duration-150'
          />
        </div>
        <div className='flex flex-col items-center m-5 iphone:h-auto laptop:h-auto'>
          <div className='relative min-h-[300px] h-auto bg-transparent laptop:w-full tablet:w-full iphone:w-full'>
            <Image
              alt='Slice App'
              layout='fill'
              objectFit='contain'
              quality={100}
              src='/slice2.png'
            />
          </div>
          <Zoom className='w-3/4 flex flex-col justify-center items-center'>
            <Slice />
          </Zoom>
        </div>
        <footer className='h-1/2 bg-blue-200 flex'>
          <Footer />
        </footer>
      </main>
    </div>
  );
}
